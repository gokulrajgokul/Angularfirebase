<!-- <div class="container mt-3 p-3 rounded shadow bg-white">
  <form [formGroup]="fileupload" (ngSubmit)="onSubmit()">
    <div class="row">
      <div class="col-lg-6 offset-lg-3">
        <h2 class="mb-4 text-primary">
          <i class="fas fa-upload me-2"></i>Upload Your Documents
        </h2>

        <label class="fw-bold" for="intern">Select Intern:</label>
        <select formControlName="internId" id="intern" required class="form-control mb-3">
          <option value="">-- Select Intern --</option>
          <option *ngFor="let intern of internList" [value]="intern.id">
            {{ intern.name }} - {{ intern.domain }}
          </option>
        </select>

        <div class="mb-3" *ngFor="let field of fileFields">
          <label class="form-label">
            <i class="fas fa-file-alt me-2 text-secondary"></i>{{ field.label }}
          </label>
          <input
            type="file"
            class="form-control"
            accept=".png, .jpg, .jpeg"
            (change)="onFileChange($event, field.key)"
          />
        </div>

        <button class="btn btn-primary w-100" type="submit" [disabled]="uploading">
          <i class="fas fa-cloud-upload-alt me-2"></i>
          {{ uploading ? 'Uploading...' : 'Upload Files' }}
        </button>
      </div>
    </div>
  </form>
</div>

<div class="col-lg-12 col-md-12 col-sm-0">
  <table class="table table-striped table-bordered border-secondary table-hover my-5 w-75">
    <thead class="rounded">
      <tr class="bg-success">
        <th class="p-2 bg-info text-center">StudentName</th>
        <th class="p-2 bg-info text-center">Domain</th>
        <th class="p-2 bg-info text-center">SSLC</th>
        <th class="p-2 bg-info text-center">HSC</th>
        <th class="p-2 bg-info text-center">Provisional</th>
        <th class="p-2 bg-info text-center">Resume</th>
        <th class="p-2 bg-info text-center">Aadhar</th>
        <th class="p-2 bg-info text-center">Photo</th>
        <th class="p-2 bg-info text-center">Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let fileuploads of uploadedFiles">
        <td class="p-2 text-center">{{ fileuploads.studentName }}</td>
        <td class="p-2 text-center">{{ fileuploads.domain }}</td>
        <td class="p-2 text-center">
            <a *ngIf="fileuploads.sslc?.content" [href]="fileuploads.sslc.content" [download]="fileuploads.sslc.name">
            <img [src]="fileuploads.sslc.content" alt="SSLC Marksheet" width="100" />
            </a>
          </td>
        <td class="p-2 text-center">
          <a *ngIf="fileuploads.hsc?.content" [href]="fileuploads.hsc.content" download="{{ fileuploads.hsc.name }}">
          <img *ngIf="fileuploads.hsc?.content"[src]="fileuploads.hsc.content" alt="photo" width="100" />
          </a>
        </td>
        <td class="p-2 text-center">
          <a *ngIf="fileuploads.provisional?.content" [href]="fileuploads.provisional.content" download="{{ fileuploads.provisional.name }}">
            <img *ngIf="fileuploads.provisional?.content"[src]="fileuploads.provisional.content" alt="photo" width="100" />
          </a>
        </td>
        <td class="p-2 text-center">
          <a *ngIf="fileuploads.resume?.content" [href]="fileuploads.resume.content" download="{{ fileuploads.resume.name }}">
            <img *ngIf="fileuploads.resume?.content"[src]="fileuploads.resume.content" alt="photo" width="100" />
          </a>
        </td>
        <td class="p-2 text-center">
          <a *ngIf="fileuploads.aadhar?.content" [href]="fileuploads.aadhar.content" download="{{ fileuploads.aadhar.name }}">
          <img *ngIf="fileuploads.aadhar?.content"[src]="fileuploads.aadhar.content" alt="photo" width="100" />
        </a>
        </td>
        <td class="p-2 text-center">
          <a *ngIf="fileuploads.photo?.content" [href]="fileuploads.photo.content" download="{{ fileuploads.photo.name }}">
          <img *ngIf="fileuploads.photo?.content" [src]="fileuploads.photo.content" alt="photo" width="100" />
          </a>
        </td>
        <td class="p-2 text-center">
          
          <button class="btn btn-primary" (click)="onEdit(fileuploads)">Edit</button>
          <button  class="btn btn-danger" (click)="onDelete(fileuploads)">Delete</button>
        </td>
      </tr>
    </tbody>
    
  </table>
</div> -->


<div class="container mt-3 p-3 rounded shadow bg-white">
  <form [formGroup]="fileupload" (ngSubmit)="onSubmit()">
    <div class="row">
      <div class="col-lg-6 offset-lg-3">
        <h2 class="mb-4 text-primary text-center">
          <i class="fas fa-upload me-2"></i>Upload Your Documents
        </h2>

        <label class="fw-bold" for="intern">Select Intern:</label>
        <select formControlName="internId" id="intern" required class="form-control mb-3">
          <option value="">-- Select Intern --</option>
          <option *ngFor="let intern of internList" [value]="intern.id">
            {{ intern.name }} - {{ intern.domain }}
          </option>
        </select>

        <div class="mb-3" *ngFor="let field of fileFields">
          <label class="form-label">
            <i class="fas fa-file-alt me-2 text-secondary"></i>{{ field.label }}
          </label>
          <input
            type="file"
            class="form-control"
            accept=".png, .jpg, .jpeg"
            (change)="onFileChange($event, field.key)"
            
          />
          <div *ngIf="files[field.key]?.content" class="mt-2">
            <p><strong>Current File:</strong> {{ files[field.key]?.name }}</p>
            <img *ngIf="files[field.key]?.content" [src]="files[field.key]?.content" alt="{{ field.label }}" width="100" />
          </div>
        </div>

       
        <button class="btn btn-primary w-100" type="submit" [disabled]="uploading">
          <i class="fas fa-cloud-upload-alt me-2"></i>
          {{ uploading ? 'Uploading...' : isEditMode ? 'Update Files' : 'Upload Files' }}
        </button>
      </div>
    </div>
  </form>
</div>


<div class="col-lg-12 col-md-12 col-sm-0 m-5">

  <div class="mb-3 w-50">
    <label class="form-label fw-bold">Filter by Intern:</label>
    <select class="form-control" [(ngModel)]="selectedInternId" (change)="filterFiles()">
      <option value="">-- Show All Interns --</option>
      <option *ngFor="let intern of internList" [value]="intern.id">
        {{ intern.name }} - {{ intern.domain }}
      </option>
    </select>
  </div>
  
  <div class="table-responsive">
  <table class="table table-striped table-bordered border-secondary table-hover my-5 w-75">
    <thead class="rounded">
      <tr class="bg-success">
        <th class="p-2 bg-info text-center">StudentName</th>
        <th class="p-2 bg-info text-center">Domain</th>
        <th class="p-2 bg-info text-center">SSLC</th>
        <th class="p-2 bg-info text-center">HSC</th>
        <th class="p-2 bg-info text-center">Provisional</th>
        <th class="p-2 bg-info text-center">Resume</th>
        <th class="p-2 bg-info text-center">Aadhar</th>
        <th class="p-2 bg-info text-center">Photo</th>
        <th class="p-2 bg-info text-center">Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let fileuploads of filteredFiles">
        <td class="p-2 text-center">{{ fileuploads.studentName }}</td>
        <td class="p-2 text-center">{{ fileuploads.domain }}</td>
        <td class="p-2 text-center">
          <a *ngIf="fileuploads.sslc?.content" [href]="fileuploads.sslc.content" [download]="fileuploads.sslc.name">
            <img [src]="fileuploads.sslc.content" alt="SSLC Marksheet" width="100" />
          </a>
        </td>
        <td class="p-2 text-center">
          <a *ngIf="fileuploads.hsc?.content" [href]="fileuploads.hsc.content" download="{{ fileuploads.hsc.name }}">
            <img *ngIf="fileuploads.hsc?.content" [src]="fileuploads.hsc.content" alt="HSC" width="100" />
          </a>
        </td>
        <td class="p-2 text-center">
          <a *ngIf="fileuploads.provisional?.content" [href]="fileuploads.provisional.content" download="{{ fileuploads.provisional.name }}">
            <img *ngIf="fileuploads.provisional?.content" [src]="fileuploads.provisional.content" alt="Provisional" width="100" />
          </a>
        </td>
        <td class="p-2 text-center">
          <a *ngIf="fileuploads.resume?.content" [href]="fileuploads.resume.content" download="{{ fileuploads.resume.name }}">
            <img *ngIf="fileuploads.resume?.content" [src]="fileuploads.resume.content" alt="Resume" width="100" />
          </a>
        </td>
        <td class="p-2 text-center">
          <a *ngIf="fileuploads.aadhar?.content" [href]="fileuploads.aadhar.content" download="{{ fileuploads.aadhar.name }}">
            <img *ngIf="fileuploads.aadhar?.content" [src]="fileuploads.aadhar.content" alt="Aadhar" width="100" />
          </a>
        </td>
        <td class="p-2 text-center">
          <a *ngIf="fileuploads.photo?.content" [href]="fileuploads.photo.content" download="{{ fileuploads.photo.name }}">
            <img *ngIf="fileuploads.photo?.content" [src]="fileuploads.photo.content" alt="Photo" width="100" />
          </a>
        </td>
        <td class="p-2 text-center">
          <button class="btn btn-primary" (click)="onEdit(fileuploads)">Edit</button>
          <button class="btn btn-danger" (click)="onDelete(fileuploads)">Delete</button>
        </td>
      </tr>
    </tbody>
  </table>\
  </div>
</div>
